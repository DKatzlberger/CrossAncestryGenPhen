% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/perm_prediction_difference.R
\name{perm_prediction_difference}
\alias{perm_prediction_difference}
\title{Permutation Test for Prediction Performance Differences}
\usage{
perm_prediction_difference(
  X,
  Y,
  R,
  MX,
  MY,
  MR,
  g_col,
  method = c("glmnet", "rf"),
  metric = c("roc_auc"),
  cv_folds = 5,
  tune_len = 10,
  max_iter = 1000,
  B = 1000,
  seed = NULL
)
}
\arguments{
\item{X}{Matrix of predictors for the test group (ancestry 1); samples x features}

\item{Y}{Matrix of predictors for the inference group (ancestry 2)}

\item{R}{Matrix of predictors for the reference training group}

\item{MX}{Data frame of metadata for `X`, must include the outcome column}

\item{MY}{Data frame of metadata for `Y`}

\item{MR}{Data frame of metadata for `R`}

\item{g_col}{Character. Name of the column in `MX`, `MY`, `MR` containing 
the binary outcome (must have exactly 2 levels).}

\item{method}{Character. Which model to use: `"glmnet"` (default) or `"rf"` (random forest).}

\item{metric}{Character. Performance metric to optimize and test, currently supports `"roc_auc"` only.}

\item{cv_folds}{Integer. Number of cross-validation folds (default = 5).}

\item{tune_len}{Integer. Number of levels per hyperparameter in grid search (default = 10).}

\item{max_iter}{Integer. Not used currently but reserved for future logic (default = 1000).}

\item{B}{Integer. Number of permutations to run (default = 1000).}

\item{seed}{Optional integer seed for reproducibility.}
}
\value{
A list containing:
\describe{
  \item{summary_stats}{A data frame with the observed statistic, group metrics, and p-value}
  \item{T_null}{Null distribution of the test statistic from permutations}
  \item{B_used}{Number of successful permutations}
}
}
\description{
This function compares model prediction performance between two datasets 
(e.g., different ancestries) using a reference training set. It trains 
a classification model using tidymodels, evaluates it on test and 
inference datasets, and assesses the statistical significance of 
the performance difference via permutation testing.
}
